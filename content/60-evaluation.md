# Evaluation {#sec:evaluation}

## Deployment

- explain concrete setup
- shoot cluster: managed by Gardener [^gardener], Kubernetes version
- worker pools: instance types, taints, system components, maxPods

[^gardener]: [https://github.com/gardener/gardener](https://github.com/gardener/gardener)

## Monitoring

- monitoring needed for observing and evaluation
- introduce setup with different components
- webhosting-exporter
- kube-state-metrics, kube-prometheus, Grafana
- cadvisor, prometheus
- metrics for sharding: shard sizes, sharder actions, ring calculations
- controller metrics: queue length, reconciliation time
- visualization: dashboards
- network metrics include metrics scraping!

general evaluation/testing?

- object distribution
- testing rolling updates
- testing scale-out/in


## Experiment

- using the monitoring setup, experiment is conducted
- evaluate, whether relevant resources from [@tbl:scaling-resources] are actually well-distributed across instances
  - increase capacity (number of objects, size is fixed)
  - increase throughput (rate of relevant events)
- compare resource usage of singleton setup with sharded setup
- note: singleton setup might have multiple replicas for HA
- define measurements
  - measure: compute, memory, network transfer
  - on controller side only, server side future work
- how to prove incremental scale-out (req. \ref{req:scale-out}) is fulfilled
- explain experiment tool
- scenarios
  - base scenario

![Load generated by experiment](../results/base-cpu.pdf)

## Results

![CPU usage by pod](../results/base-cpu.pdf)

![Memory usage by pod](../results/base-memory.pdf)

![Network bandwidth by pod](../results/base-network.pdf)

- execute scenario against sharded and singleton controller
- compare test results

## Discussion

\todo[inline]{Make this top level chapter?}
